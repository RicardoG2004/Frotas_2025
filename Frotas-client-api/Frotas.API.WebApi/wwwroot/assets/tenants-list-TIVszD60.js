import{_ as te}from"./layout-bRPLI_qW.js";import{u as K}from"./tenantsStore-wtRwVbyB.js";import{_ as le,a as oe}from"./active-badge-FFtF6b_V.js";import{_ as ne,d as se}from"./avatar-title-group-t4BuFJuh.js";import{u as L,_ as Q}from"./loading-button-HDMC2WxA.js";import{c as W,d as de,a as B}from"./index.esm-ckVFB3Pu.js";import{_ as X}from"./_plugin-vue_export-helper-x3n3nnut.js";import{r as w,c as J,d as n,e as y,f as F,w as t,i as a,j as C,m as S,k as m,g as e,t as D,h as v,p as ie,n as re,l as G,A as Y,F as Z,G as O,o as ue}from"./index-nCaapDSo.js";import"./logo-TZSfwjHH.js";const me=l=>(ie("data-v-31fe958e"),l=l(),re(),l),ce={class:"form-layout"},fe={class:"modal-footer footer-controls border-top-0"},_e=me(()=>v("div",{class:"footer-controls__left"},null,-1)),pe={class:"footer-controls__right"},be={__name:"edit-tenant-modal",props:{data:{type:Object,required:!1},loading:{type:Boolean,default:!1}},emits:["proceed","cancel"],setup(l,{emit:g}){var H,M;const i=g,r=l,f=w({name:((H=r.data)==null?void 0:H.name)||"",isActive:((M=r.data)==null?void 0:M.isActive)||!1}),k=W({isActive:de().required(),name:B().required()}),{handleSubmit:c,defineField:s,errors:_,meta:p}=L({initialValues:f,validationSchema:k}),[b,A]=s("isActive"),[U,P]=s("name"),R=J(()=>p.value.dirty&&p.value.valid),h=w(!0),$=async()=>{h.value=!1,i("cancel")},x=c(T=>{let d={...r.data,...T};i("proceed",d)});return(T,d)=>{const q=n("b-form-checkbox"),j=n("b-form-input"),o=n("b-form-invalid-feedback"),E=n("b-form-group"),I=n("b-button"),N=n("b-modal");return y(),F(N,{id:"standard-modal",modelValue:h.value,"onUpdate:modelValue":d[3]||(d[3]=V=>h.value=V),title:"Edit Tenant","title-class":"h4",size:"lg",loading:l.loading,"hide-footer":"",onCancel:$,onClose:$,onHidden:$},{default:t(()=>[v("form",{onSubmit:d[2]||(d[2]=(...V)=>a(x)&&a(x)(...V))},[v("div",ce,[e(q,S(a(A),{modelValue:a(b),"onUpdate:modelValue":d[0]||(d[0]=V=>C(b)?b.value=V:null),switch:""}),{default:t(()=>[m(" Is Active")]),_:1},16,["modelValue"]),e(E,{label:"Name","label-for":"name"},{default:t(()=>[e(j,S({type:"text"},a(P),{modelValue:a(U),"onUpdate:modelValue":d[1]||(d[1]=V=>C(U)?U.value=V:null)}),null,16,["modelValue"]),e(o,{state:!1},{default:t(()=>[m(D(a(_).name),1)]),_:1})]),_:1})])],32),v("div",fe,[_e,v("div",pe,[e(I,{variant:"light",onClick:$},{default:t(()=>[m("Close")]),_:1}),e(Q,{variant:"primary",type:"submit",loading:l.loading,onClick:a(x),disabled:!R.value},{default:t(()=>[m("Save")]),_:1},8,["loading","onClick","disabled"])])])]),_:1},8,["modelValue","loading"])}}},ve=X(be,[["__scopeId","data-v-31fe958e"]]),ge={key:1,class:"float-end text-primary"},Ve={__name:"edit-tenant",props:["targetTenant"],setup(l){const g=K(),i=l,r=w(!1),f=w(!1),k=async s=>{f.value=!0,await g.updateTenant(s)&&(r.value=!1),f.value=!1},c=J(()=>i.targetTenant.id!="root");return(s,_)=>{const p=n("b-button");return y(),G(Z,null,[c.value?(y(),F(p,{key:0,variant:"soft-primary",pill:"",onClick:_[0]||(_[0]=b=>r.value=!0),class:"float-end"},{default:t(()=>[m("Edit")]),_:1})):(y(),G("strong",ge,"N/A")),r.value?(y(),F(ve,{key:2,loading:f.value,data:i.targetTenant,onProceed:k,onCancel:_[1]||(_[1]=b=>r.value=!1)},null,8,["loading","data"])):Y("",!0)],64)}}},z=se(),we=[z.accessor("name",{label:()=>"Name",enableSorting:!0,cell:({row:l})=>O(ne,{title:l.original.name,hideAvatar:!0})}),z.accessor("id",{label:"Id",enableSorting:!0}),z.accessor("isActive",{label:"Active",enableSorting:!0,size:30,cell:({row:l})=>O(le,{isActive:l.original.isActive})}),z.accessor("id",{label:"",enableSorting:!1,cell:({row:l})=>O(Ve,{targetTenant:l.original})})],ye={class:"form-layout"},ke={class:"modal-footer border-top-0"},Ae={__name:"register-tenant-modal",props:{data:{type:Object,required:!1},loading:{type:Boolean,default:!1}},emits:["proceed","cancel"],setup(l,{emit:g}){const i=g,r=w({id:"",name:"",adminEmail:"",password:"Password123!"}),f=W({id:B().required(),name:B().required(),adminEmail:B().email().required(),password:B().required()}),{handleSubmit:k,defineField:c,errors:s,meta:_}=L({initialValues:r,validationSchema:f}),[p,b]=c("id"),[A,U]=c("name"),[P,R]=c("adminEmail"),[h,$]=c("password"),[x,H]=c("hasIsolatedDatabase"),M=J(()=>_.value.dirty&&_.value.valid),T=w(!0),d=async()=>{T.value=!1,i("cancel")},q=k(j=>{i("proceed",j)});return(j,o)=>{const E=n("b-form-input"),I=n("b-form-invalid-feedback"),N=n("b-form-group"),V=n("b-form-checkbox"),ee=n("b-button"),ae=n("b-modal");return y(),F(ae,{id:"standard-modal",modelValue:T.value,"onUpdate:modelValue":o[6]||(o[6]=u=>T.value=u),title:"Register New Tenant","title-class":"h4",size:"lg","hide-footer":"",onCancel:d,onClose:d,onHidden:d},{default:t(()=>[v("form",{onSubmit:o[5]||(o[5]=(...u)=>a(q)&&a(q)(...u))},[v("div",ye,[e(N,{label:"Id","label-for":"id"},{default:t(()=>[e(E,S({type:"text"},a(b),{modelValue:a(p),"onUpdate:modelValue":o[0]||(o[0]=u=>C(p)?p.value=u:null),id:"id",placeholder:"Tenant Id"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).id),1)]),_:1})]),_:1}),e(N,{label:"Name","label-for":"name"},{default:t(()=>[e(E,S({type:"text"},a(U),{modelValue:a(A),"onUpdate:modelValue":o[1]||(o[1]=u=>C(A)?A.value=u:null),id:"name",placeholder:"Name"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).name),1)]),_:1})]),_:1}),e(N,{label:"Admin Email","label-for":"adminEmail"},{default:t(()=>[e(E,S({type:"text"},a(R),{modelValue:a(P),"onUpdate:modelValue":o[2]||(o[2]=u=>C(P)?P.value=u:null),id:"adminEmail",placeholder:"name@example.com"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).adminEmail),1)]),_:1})]),_:1}),e(N,{label:"Password","label-for":"password"},{default:t(()=>[e(E,S({type:"text"},a($),{modelValue:a(h),"onUpdate:modelValue":o[3]||(o[3]=u=>C(h)?h.value=u:null),id:"password",placeholder:"Password"}),null,16,["modelValue"]),e(I,{state:!1},{default:t(()=>[m(D(a(s).password),1)]),_:1})]),_:1}),e(V,S(a(H),{modelValue:a(x),"onUpdate:modelValue":o[4]||(o[4]=u=>C(x)?x.value=u:null),switch:""}),{default:t(()=>[m("Isolated Database")]),_:1},16,["modelValue"])])],32),v("div",ke,[e(ee,{variant:"light",onClick:d},{default:t(()=>[m("Close")]),_:1}),e(Q,{variant:"primary",type:"submit",loading:l.loading,onClick:a(q),disabled:!M.value},{default:t(()=>[m("Save")]),_:1},8,["loading","onClick","disabled"])])]),_:1},8,["modelValue"])}}},he=X(Ae,[["__scopeId","data-v-19583ce0"]]),xe=v("div",{class:"mb-2"},[v("small",null,"Client-side pagination with sorting & filtering")],-1),qe={__name:"tenants-list",setup(l){const g=K(),i=w(!1),r=w(!1),f=w(!1);ue(async()=>{r.value=!0,await g.getTenants(),r.value=!1});const k=async c=>{f.value=!0,await g.addTenant(c)&&(i.value=!1),f.value=!1};return(c,s)=>{const _=n("b-button"),p=n("b-col"),b=n("b-row");return y(),G(Z,null,[e(te,null,{default:t(()=>[e(b,null,{default:t(()=>[e(p,{class:"d-flex flex-row-reverse mb-3"},{default:t(()=>[e(_,{variant:"primary",onClick:s[0]||(s[0]=A=>i.value=!i.value)},{default:t(()=>[m("New Tenant")]),_:1})]),_:1})]),_:1}),e(b,null,{default:t(()=>[e(p,null,{default:t(()=>[e(oe,{data:a(g).tenants,columns:a(we),loading:r.value,filterPlaceholder:"Search Tenants..."},null,8,["data","columns","loading"]),xe]),_:1})]),_:1})]),_:1}),i.value?(y(),F(he,{key:0,loading:f.value,onProceed:k,onCancel:s[1]||(s[1]=A=>i.value=!0)},null,8,["loading"])):Y("",!0)],64)}}};export{qe as default};
